#include <Wire.h>
#include <Adafruit_APDS9960.h>

Adafruit_APDS9960 apds;                   // Create sensor object

#define SENSOR_ADDR (0x52)
#define SENSOR_ITIME 100


void setup() {
  Serial.begin(115200);
  while (!Serial);
    
  // Initialize I2C communication
  if (!apds.begin(SENSOR_ADDR)) {
      Serial.println("Failed to initialize APDS-9151!");
      while (1);
  }
  
  Serial.println("APDS-9151 Initialized.");
  
  // Enable color sensing
  apds.enableColor(true);
}

void loop() {
  uint16_t r, g, b, c; // Variables for RGB and Clear (ambient) values
  
  if (apds.colorDataReady()) {
      apds.getColorData(&r, &g, &b, &c); // Read color data
      
      Serial.print("Red: "); Serial.print(r);
      Serial.print("Green: "); Serial.print(g);
      Serial.print("Blue: "); Serial.print(b);
      Serial.print("Clear: "); Serial.println(c);
  }
  
  delay(500);  // Wait before the next reading
}